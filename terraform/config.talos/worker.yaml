cluster:
  network:
    cni:
      name: flannel
machine:
  network:
    interfaces:
      - interface: eth1
        dhcp: true
  kubelet:
    extraMounts:
      - destination: /var/local-path-provisioner
        type: bind
        source: /var/local-path-provisioner
        options:
          - bind
          - rshared
          - rw
  firewall:
    defaultAction: block
    rules:
      # Allow kubelet access within cluster
      - name: kubelet-ingress
        portSelector:
          ports:
            - 10250
          protocol: tcp
        ingress:
          - subnet: 10.0.0.0/16
      # Allow NodePorts
      - name: nodeport-ingress
        portSelector:
          ports:
            - 30080
            - 30443
          protocol: tcp
        ingress:
          - subnet: 0.0.0.0/0
      # Allow CNI VXLAN traffic between nodes
      - name: cni-vxlan
        portSelector:
          ports:
            - 4789  # For Flannel VXLAN
          protocol: udp
        ingress:
          - subnet: 10.0.0.0/16
